<div>
    <p-toast [style]="{marginTop: '80px'}"></p-toast>
    <p-table [value]="managers" dataKey="id" [columns]="cols"
    styleClass="p-datatable-gridlines"
    [resizableColumns]="true" 
   
>
<ng-template pTemplate="colgroup" let-columns>
<colgroup *ngFor="let col of cols">
    <col pResizableColumn  >
</colgroup>
</ng-template>
<ng-template pTemplate="header" let-columns>
<tr>
    <th style="width: 6rem"></th>
    <th  pResizableColumn ="col" *ngFor="let col of cols">                
           <span class="p-text-center" class="subTable"> {{col}} </span>   
    </th>
</tr>

</ng-template>

<ng-template pTemplate="body" let-manager let-expanded="expanded" let-index="rowIndex">
    <tr [pReorderableRow]="index">
        <td style="width: 6rem">
            <button type="button" pButton pRipple [pRowToggler]="manager" class="p-button-text p-button-rounded p-button-plain" [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'" (click)="showProcedures(manager.id)" ></button>
        </td>  
        <td  pResizableColumn  class="ui-resizable-column">{{manager.username}}</td>
        <td  pResizableColumn  class="ui-resizable-column">{{manager.email}}</td>
        <td  pResizableColumn  class="ui-resizable-column">{{manager.firstname}}</td>
        <td  pResizableColumn  class="ui-resizable-column">{{manager.lastname}}</td>
        <td  pResizableColumn  class="ui-resizable-column">{{manager.title}}</td>
        <td  pResizableColumn  class="ui-resizable-column">{{manager.mobileNumber}}</td> 


    </tr>
</ng-template>
 <ng-template pTemplate="rowexpansion" let-manager>
    <tr>
        <td colspan="7">
            <div class="p-p-3" >
                <p-table [value]="selectedProcedures"  [resizableColumns]="true" dataKey="id" styleClass="p-datatable-sm" >
                    <ng-template pTemplate="header">
                        <tr class="subTable">
                            <th pResizableColumn ><span class="subTable">name</span>  </th>
                            <th pResizableColumn> <span class="subTable">dataSource</span> </th>
                            <th pResizableColumn style="width: 8rem">  <span class="subTable">data</span></th>
                            <th pResizableColumn style="width: 8rem"> <span class="subTable">analysis</span> </th>
                            <th style="width: 6rem"> </th>

                        </tr>
                    </ng-template>

                    <ng-template pTemplate="body" let-procedure  >
                        <tr >
     
                            <td  pResizableColumn  class="ui-resizable-column">{{procedure.name}}</td>
                            <td  pResizableColumn  class="ui-resizable-column">{{procedure.dataSource}}</td>
                            <td  pResizableColumn  class="ui-resizable-column" style="width: 8rem"><i *ngIf="procedure.data" class="pi pi-check checkIcon"></i> <i *ngIf="!procedure.data" class="pi pi-times closeIcon"></i></td>
                            <td  pResizableColumn  class="ui-resizable-column" style="width: 8rem"><i *ngIf="procedure.analysis" class="pi pi-check checkIcon"></i> <i *ngIf="!procedure.analysis" class="pi pi-times closeIcon"></i></td>               
                            <td style="width: 6rem" pTooltip="Edit Procedure" tooltipPosition="bottom"><i  class="pi pi-pencil subTable"></i> </td>               

                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage">
                        <tr>
                            <td colspan="4">There are no order for this product yet.</td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </td>
    </tr>
</ng-template> 
</p-table>

</div>
